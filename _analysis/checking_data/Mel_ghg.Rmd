---
title: "Untitled"
output: html_document
editor_options: 
  chunk_output_type: console
---

Trouble shooting green house gas emissions.

```{r}

library(countrycode)
library(raster)
library(dplyr)
library(ggplot2)
library(here)
library(tidyverse)

```


## Check 1: Compare burning to chicken manure
I think these should be similar.  The manure is directly from FAO.

```{r}

burn <- read_csv(here("_analysis/checking_data/Mel_data/FAOSTAT_data_6-3-2020_crop_burning.csv")) %>%
  filter(Area != "China") 
#%>%
#  filter(Item != "Rice, paddy")

unique(burn$Item)
unique(burn$Unit)
sum(burn$Value) * 1000  # convert gigagrams to tonnnes

```

Crop chicken feed GHG extract to see if we get similar values as GLEAM.

```{r}

tmp <- raster("/home/shares/food-systems/Food_footprint/stressors/raw/feed_crop_broiler_ghg.tif")
cellStats(tmp, "sum", na.rm=TRUE)

tmp <- raster("/home/shares/food-systems/Food_footprint/stressors/raw/feed_crop_broiler_water.tif")
cellStats(tmp, "sum", na.rm=TRUE)

tmp <- raster("/home/shares/food-systems/Food_footprint/stressors/crop_feed_raw/broiler_crop_maiz_ghg.tif")
cellStats(tmp, "sum", na.rm=TRUE)


tmp <- raster("/home/shares/food-systems/Food_footprint/final_data/_tif_version/crop_maiz_ghg.tif")
cellStats(tmp, "sum", na.rm=TRUE)

tmp_stack <- list.files("/home/shares/food-systems/Food_footprint/final_data/_tif_version", pattern="crop", full=TRUE)

tmp_stack <- stack(grep("ghg", tmp_stack, value=TRUE))


total <- sum(tmp_stack, na.rm = TRUE)
cellStats(total, "sum", na.rm=TRUE)